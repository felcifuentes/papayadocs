'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
var Server_1 = require("./Server");
var host_express_1 = require("./hosting/host-express");
var glimpse_common_1 = require("@glimpse/glimpse-common");
// TODO: Move this to server type once hosting has been converted to TypeScript.
// there's an error that occurs when running glimpse.agent tests if we call
// require('./hosting/host-express') from with Server.ts.  Need to investigate
// what is going on.
var oldInit = Server_1.instance.init;
Server_1.instance.init = function newInit() {
    oldInit.apply(this, arguments);
    host_express_1.setupProxy();
};
(function sendPackageRequiredInitEvent() {
    var props = {
        nodeEnv: process.env.NODE_ENV
    };
    var measurements = {};
    Server_1.instance.providers.telemetryService.sendEvent(glimpse_common_1.TelemetryEvents.NODE_SERVER_REQUIRED, props, measurements);
})();
module.exports.server = Server_1.instance;

//# sourceMappingURL=../../maps/src/glimpse.js.map
