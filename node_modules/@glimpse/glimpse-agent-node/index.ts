'use strict';

import tracing from './tracing/Tracing';
export { tracing };

import * as ExpressEvents from './tracing/module_instrumentors/ExpressEvents';
export { ExpressEvents };

export { ContextManagerProvider } from './messaging/ContextManagerProvider';
import { IMeasurements, IProperties, TelemetryEvents } from '@glimpse/glimpse-common';

// need to import IAgent to get around some errors when generating typescript definitions
//tslint:disable-next-line:no-unused-variable
import { IAgent } from './IAgent';
import { createGlobalNodeAgent } from './Agent';
const agent = createGlobalNodeAgent();

(function sendPackageRequiredInitEvent() {
    const props: IProperties = {
        nodeEnv: process.env.NODE_ENV
    };
    const measurements: IMeasurements = {};

    agent.providers.telemetryService.sendEvent(TelemetryEvents.NODE_AGENT_REQUIRED, props, measurements);
})();

export { agent };
