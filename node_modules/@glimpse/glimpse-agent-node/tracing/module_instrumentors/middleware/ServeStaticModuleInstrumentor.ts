import * as _ from 'lodash';

import { MiddlewareModuleInstrumentor } from './MiddlewareModuleInstrumentor';

export class ServeStaticModuleInstrumentor extends MiddlewareModuleInstrumentor {
    constructor() {
        super(
            'serve-static'          /* supportedModule */,
            '>=1.3 <1.13'           /* supportedModuleVersions */,
            'serveStatic'           /* name */,
            'Serve static files'    /* displayName */,
            'serve-static'          /* packageName */);
    }

    protected onProxyModule(originalModule, newModule) {
        // Ensure attached properties (e.g. `mime`) carry over to the proxy...
        _.assign(newModule, originalModule);
    }
}

export default ServeStaticModuleInstrumentor;
