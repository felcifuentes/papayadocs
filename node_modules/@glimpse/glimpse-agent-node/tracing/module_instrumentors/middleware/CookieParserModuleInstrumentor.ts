import * as _ from 'lodash';

import { MiddlewareModuleInstrumentor } from './MiddlewareModuleInstrumentor';

export class CookieParserModuleInstrumentor extends MiddlewareModuleInstrumentor {
    constructor() {
        super(
            'cookie-parser' /* supportedModule */,
            '>=1.3 <1.5'    /* supportedModuleVersions */,
            'cookieParser'  /* name */,
            'Cookie Parser' /* displayName */,
            'cookie-parser' /* packageName */);
    }

    protected onProxyModule(originalModule, newModule) {
        // NOTE: Ensure proxy has attached `JSONCookie`, `JSONCookies`, `secureCookie`, `secureCookies` helper functions.
        _.assign(newModule, originalModule);
    }
}

export default CookieParserModuleInstrumentor;
